<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Landscape Projects Report - 2025</title>
  <link rel="stylesheet" href="styles.css" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      font-family: "Tahoma", Arial, sans-serif;
      line-height: 1.6;
      padding: 20px;
      background: #f0eeee;
    }

    h2 {
      text-align: center;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 40px;
      background: #fff;
    }

    th,
    td {
      border: 1px solid #000;
      padding: 8px;
      text-align: center;
      vertical-align: middle;
    }

    th {
      background: var(--accent-light);
    }

    .gallery-thumbnail {
      cursor: pointer;
      border-radius: 4px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      object-fit: cover;
    }

    .gallery-thumbnail:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    /* Keep thumbnail sizing consistent */
    .thumb-cell img {
      width: 100px;
      height: 100px;
      display: block;
      object-fit: cover;
    }
  </style>

  <script>
    // If the page is embedded and parent may supply theme, request it (harmless if not)
    window.addEventListener('DOMContentLoaded', () => {
      try { window.parent.postMessage({ type: 'request-theme' }, '*'); } catch (e) {}
    });
  </script>
</head>

<body>

  <div class="year-container">
    <table>
      <thead>
        <tr>
          <th>No.</th>
          <th colspan="2">Images</th>
          <th>Location</th>
          <th>Action</th>
          <th>Total Area</th>
          <th>Previous Condition</th>
          <th>Current Condition</th>
          <th>Green Area</th>
          <th>No. of Ornamental Trees</th>
          <th>Additional Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row1-1.jpg" class="gallery-thumbnail" data-gallery="row1" width="100" height="100" alt="Buildings S40 S41 S50 S51 thumbnail">
          </td>
          <td>Buildings S40, S41, S50, S51</td>
          <td>Maintenance and replanting of landscape basins</td>
          <td>6,835 m²</td>
          <td>Previously: neglected basins lacking ornamental planting</td>
          <td>Re-landscaped with structured planting</td>
          <td>—</td>
          <td>80</td>
          <td>Expanded ornamental planting with roses and flowering species</td>
        </tr>

        <tr>
          <td>2</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row2-1.jpg" class="gallery-thumbnail" data-gallery="row2" width="100" height="100" alt="Behind University Swimming Pool thumbnail">
          </td>
          <td>Behind University Swimming Pool (S38)</td>
          <td>Rehabilitation of neglected landscape area</td>
          <td>1,000 m²</td>
          <td>Previously: degraded by weeds, random trees, and waste</td>
          <td>Site fully rehabilitated</td>
          <td>—</td>
          <td>—</td>
          <td>Transformed into a functional green space</td>
        </tr>

        <tr>
          <td>3</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row3-1.jpg" class="gallery-thumbnail" data-gallery="row3" width="100" height="100" alt="In front of Building S45 thumbnail">
          </td>
          <td>In front of Building S45</td>
          <td>Landscape redevelopment and rehabilitation</td>
          <td>800 m²</td>
          <td>Previously: dead trees, harmful weeds</td>
          <td>Site cleared, re-landscaped</td>
          <td>—</td>
          <td>—</td>
          <td>Improved the building’s frontage landscape</td>
        </tr>

        <tr>
          <td>4</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row4-1.jpg" class="gallery-thumbnail" data-gallery="row4" width="100" height="100" alt="From behind College of Arts to Deanship thumbnail">
          </td>
          <td>From behind College of Arts to Deanship of Student Affairs</td>
          <td>Large-scale landscape rehabilitation</td>
          <td>3,000 m²</td>
          <td>Previously: random and unsuitable trees</td>
          <td>Phase I: clearing, Phase II: planting over 300 trees</td>
          <td>—</td>
          <td>—</td>
          <td>Multi-phase project to enhance biodiversity</td>
        </tr>

        <tr>
          <td>5</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row5-1.jpg" class="gallery-thumbnail" data-gallery="row5" width="100" height="100" alt="Hill Area thumbnail">
          </td>
          <td>Hill Area behind Main Road</td>
          <td>Rehabilitation and replanting of hillside landscape</td>
          <td>1,200 m²</td>
          <td>Previously: neglected area with invasive trees</td>
          <td>Area cleared, re-landscaped with shading and ornamental trees</td>
          <td>—</td>
          <td>350</td>
          <td>Created a natural green hill enhancing entrance landscape</td>
        </tr>

        <tr>
          <td>6</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row6-1.jpg" class="gallery-thumbnail" data-gallery="row6" width="100" height="100" alt="Main fence area thumbnail">
          </td>
          <td>Main fence area near the main entrance gate</td>
          <td>Tree planting for fence area</td>
          <td>160 RM</td>
          <td>Previously: uncultivated land</td>
          <td>Sustainable ornamental trees were planted</td>
          <td>—</td>
          <td>50</td>
          <td>Enhanced the overall appearance of the site and added an aesthetic character; rehabilitated an area of approximately 160 RM and planted 50 ornamental trees.</td>
        </tr>

        <tr>
          <td>7</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row7-1.jpg" class="gallery-thumbnail" data-gallery="row7" width="100" height="100" alt="Open courtyard behind the main mosque thumbnail">
          </td>
          <td>Open courtyard behind the main mosque</td>
          <td>Tree planting for the area</td>
          <td>10,800 m²</td>
          <td>Previously: uncultivated area</td>
          <td>1,000 sustainable ornamental trees were planted</td>
          <td>—</td>
          <td>1000</td>
          <td>Rehabilitated an area of approximately 10,800 m², including the removal of weeds, waste, and old soil, replacement with new agricultural sand, installation of an irrigation network, and planting of sustainable trees with landscape design.</td>
        </tr>

        <tr>
          <td>8</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row8-1.jpg" class="gallery-thumbnail" data-gallery="row8" width="100" height="100" alt="Student rest areas thumbnail">
          </td>
          <td>Student rest areas of the College of Science and the College of Information Technology</td>
          <td>Removal of harmful and random trees and redevelopment of the agricultural area</td>
          <td>4,212 m²</td>
          <td>Previously: neglected area with harmful old trees, weeds, and waste</td>
          <td>The area was rehabilitated with sustainable ornamental trees, various plants, and seasonal flowers.</td>
          <td>—</td>
          <td>104</td>
          <td>The project includes removing harmful trees, preparing basins and soil, and implementing landscape designs. The second phase includes planting more than 100 sustainable shade trees and increasing plant cover with new species.</td>
        </tr>

        <tr>
          <td>9</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row9-1.jpg" class="gallery-thumbnail" data-gallery="row9" width="100" height="100" alt="Roman Amphitheater thumbnail">
          </td>
          <td>Roman Amphitheater</td>
          <td>Area development with sustainable plants and seasonal flowers</td>
          <td>840 m²</td>
          <td>Previously: degraded and uncultivated land</td>
          <td>The entire area was planted and landscaped to match the environment and the general aesthetic appearance.</td>
          <td>840 m²</td>
          <td>12</td>
          <td>Developed the area to make it more attractive for visitors, students, and staff.</td>
        </tr>

        <tr>
          <td>10</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row10-1.jpg" class="gallery-thumbnail" data-gallery="row10" width="100" height="100" alt="Area behind the swimming pool thumbnail">
          </td>
          <td>Area behind the swimming pool (S38)</td>
          <td>Afforestation with Bahraini almond trees — a local shade and fruit-bearing species</td>
          <td>1,100 m²</td>
          <td>Previously: presence of harmful and random trees negatively affecting the environment and infrastructure</td>
          <td>100 Bahraini almond trees were planted</td>
          <td>—</td>
          <td>100</td>
          <td>Rehabilitation of a 1,100 m² area is in progress. The space will be afforested with 100 Bahraini almond trees in collaboration with the College of Health Sciences, the College of Physical Education, and a group of students participating in the tree planting.</td>
        </tr>

        <tr>
          <td>11</td>
          <td colspan="2" class="thumb-cell">
            <img src="images/row11-1.jpg" class="gallery-thumbnail" data-gallery="row11" width="100" height="100" alt="S20 Building thumbnail">
          </td>
          <td>S20 Building</td>
          <td>Removal of harmful and random trees and redevelopment of the agricultural area</td>
          <td>960 m²</td>
          <td>Previously: presence of harmful and random trees negatively affecting the environment and infrastructure</td>
          <td>The area will be replanted with sustainable shade trees, ornamental plants, and seasonal flowers, adding distinctive landscaping that enhances visual appeal and promotes vegetation sustainability.</td>
          <td>—</td>
          <td>—</td>
          <td>Ongoing project for removing harmful trees, preparing basins and soil, and implementing landscape design works.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- NOTE: Inline popup removed. Thumbnails open reportImages.html with query params. -->

  <script>
    /* Replace the old inline gallery behavior:
       - fetch API
       - for Year === 2025, match Record Number to row number (data-gallery="rowX")
       - set thumbnail src to the record's first Image N if present
       - clicking the thumbnail navigates to reportImages.html?year=2025&record=X
       - leaves table text/content unchanged
    */
    (function () {
      const API_ENDPOINT = 'http://localhost:3000/api/reportImages';
      const TARGET_YEAR = 2025;

      function getFirstImage(rec) {
        for (let i = 1; i <= 20; i++) {
          const key = 'Image ' + i;
          if (rec[key] && typeof rec[key] === 'string' && rec[key].trim()) return rec[key].trim();
        }
        return '';
      }

      async function initThumbnails() {
        let data;
        try {
          const res = await fetch(API_ENDPOINT);
          if (!res.ok) throw new Error('Network response not ok');
          data = await res.json();
        } catch (err) {
          console.error('Failed to fetch reportImages API', err);
          return;
        }

        const map = {};
        if (Array.isArray(data)) {
          data.forEach(rec => {
            if (Number(rec.Year) === TARGET_YEAR && rec['Record Number'] != null) {
              map[String(Number(rec['Record Number']))] = rec;
            }
          });
        }

        document.querySelectorAll('.gallery-thumbnail').forEach(img => {
          const gallery = img.dataset.gallery; // e.g. "row4"
          if (!gallery) return;
          const m = gallery.match(/row(\d+)/i);
          if (!m) return;
          const recordNum = String(Number(m[1]));
          const rec = map[recordNum];
          const first = rec ? getFirstImage(rec) : '';

          if (first) {
            img.src = first;
          } // otherwise keep existing hardcoded src

          img.style.cursor = 'pointer';
          // Replace node to remove old listeners, then attach new listener
          const newImg = img.cloneNode(true);
          img.parentNode.replaceChild(newImg, img);

          newImg.addEventListener('click', (e) => {
            e.preventDefault();
            const params = new URLSearchParams({ year: String(TARGET_YEAR), record: recordNum });
            window.location.href = 'reportImages.html?' + params.toString();
          });
        });
      }

      document.addEventListener('DOMContentLoaded', initThumbnails);
    })();
  </script>

</body>

</html>
